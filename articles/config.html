<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MCView configuration files  â€¢ MCView</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="MCView configuration files ">
<meta property="og:description" content="MCView">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MCView</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>MCView configuration files</h1>
            
      
      
      <div class="hidden name"><code>config.Rmd</code></div>

    </div>

    
    
<p>An <strong>MCView</strong> project can have 3 configuration files:</p>
<ol style="list-style-type: decimal">
<li>config.yaml - main configuration file (required)</li>
<li>help.yaml - help text messages (optional)</li>
<li>about.Rmd - text for the about tab (optional)</li>
</ol>
<div id="config-yaml" class="section level2">
<h2 class="hasAnchor">
<a href="#config-yaml" class="anchor"></a>config.yaml</h2>
<p>This is the main configuration file of the app. It is required both for generating the files the app needs (import) and controlling the app appearance and behavior.</p>
<p><strong>MCView</strong> supports both <em>metacell1</em> (the R package) and <em>metacell2</em> (metacells python package). We are going to focus mainly on import from <em>metacell2</em>. See The end of this document for <em>metacell1</em> import parameters.</p>
<p>We will start with an example and then go over the parameters one by one:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">title:</span><span class="at"> MCView</span>
<span class="fu">tabs:</span><span class="at"> </span><span class="kw">[</span><span class="st">"About"</span><span class="kw">,</span> <span class="st">"Manifold"</span><span class="kw">,</span> <span class="st">"Genes"</span><span class="kw">,</span> <span class="st">"Metacells"</span><span class="kw">,</span> <span class="st">"Annotate"</span><span class="kw">]</span><span class="at"> </span><span class="co"># which tabs to show</span>
<span class="fu">help:</span><span class="at"> false </span><span class="co"># set to true to show introjs help on start</span>
<span class="fu">metacells:</span><span class="at"> </span>
  <span class="fu">PBMC:</span>
    <span class="fu">anndata:</span><span class="at"> raw/metacells.h5ad </span><span class="co"># should be absolute path</span>
    <span class="fu">cell_type_field:</span><span class="at"> cluster </span><span class="co"># name of the field in the anndata object$obs which contains a cell type (optional)</span>
    <span class="fu">mc_annot:</span><span class="at"> </span><span class="co"># cell type annotation for each metacell</span>
      <span class="fu">fn:</span><span class="at"> raw/metacell-cell-types.csv </span><span class="co"># file with with cell type assignment for each metacell</span>
      <span class="fu">metacell:</span><span class="at"> mc </span><span class="co"># name of the field which contains the metacell id</span>
      <span class="fu">cell_type:</span><span class="at"> cluster </span><span class="co"># name of the field which contains the cell type      </span>
    <span class="fu">cell_type_annot:</span><span class="at"> </span><span class="co"># color annotation for each cell type</span>
      <span class="fu">fn:</span><span class="at">  raw/cluster-colors.csv </span><span class="co"># file with color for each cell type (optional)</span>
      <span class="fu">cell_type:</span><span class="at"> cluster </span><span class="co"># name of the field which contains the cell type</span>
      <span class="fu">color:</span><span class="at"> color </span><span class="co"># name of the field which contains the color</span>
<span class="co"># selected_gene1: Foxc1 # Default selected gene1 (optional)</span>
<span class="co"># selected_gene2: Twist1 # Default selected gene2 (optional)</span>
<span class="fu">selected_mc1:</span><span class="at"> 1 </span><span class="co"># Default selected metacell1 </span>
<span class="fu">selected_mc2:</span><span class="at"> 2 </span><span class="co"># Default selected metacell2</span></code></pre></div>
<div id="title" class="section level3">
<h3 class="hasAnchor">
<a href="#title" class="anchor"></a>title</h3>
<p>The title of the app. This would be shown on the top left of the screen.</p>
</div>
<div id="tabs" class="section level3">
<h3 class="hasAnchor">
<a href="#tabs" class="anchor"></a>tabs</h3>
<p>Controls which tabs to show, and their order. Options are:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="kw">[</span><span class="st">"About"</span><span class="kw">,</span> <span class="st">"Manifold"</span><span class="kw">,</span> <span class="st">"Genes"</span><span class="kw">,</span> <span class="st">"Metacells"</span><span class="kw">,</span> <span class="st">"Annotate"</span><span class="kw">]</span></code></pre></div>
</div>
<div id="help" class="section level3">
<h3 class="hasAnchor">
<a href="#help" class="anchor"></a>help</h3>
<p>Controls wether to start the app with a help modal (from introjs).</p>
</div>
<div id="metacells" class="section level3">
<h3 class="hasAnchor">
<a href="#metacells" class="anchor"></a>metacells</h3>
<p>A list of one or more metacell dataset. Each dataset should contain at least the <code>anndata</code> parameter which holds the path for the <code>h5ad</code> file which is the output of metacell2. Switching between the different dataset is done via the right sidebar in the app.</p>
<p>Dataset parameters:</p>
<div id="anndata" class="section level4">
<h4 class="hasAnchor">
<a href="#anndata" class="anchor"></a>anndata</h4>
<p>Path for for the <code>h5ad</code> file which is the output of metacell2. Note that the data should have either absolute path or relative path to the directory from which we run the <code>import</code> command.</p>
</div>
<div id="cell_type_field-optional" class="section level4">
<h4 class="hasAnchor">
<a href="#cell_type_field-optional" class="anchor"></a>cell_type_field (optional)</h4>
<p>Name of the field in the anndata object$obs which contains a cell type (or a cluster).</p>
<p>If this parameter and <code>mc_annot</code> are missing, <strong>MCView</strong> would cluster the metacell matrix using kmeans++ algorithm (from the <code>tglkmeans</code> package). Note if <code>mc_annot</code> parameter is set this field is ignored.</p>
</div>
</div>
<div id="mc_annot-optional" class="section level3">
<h3 class="hasAnchor">
<a href="#mc_annot-optional" class="anchor"></a>mc_annot (optional)</h3>
<p>If you already have a cell type assignment (or a cluster assignment) for each metacell, you can use this set of parameters to point <strong>MCView</strong> to a file which holds this information.</p>
<p>Parameters are:</p>
<ul>
<li>fn: filename with cell type assignment for each metacell</li>
<li>metacell: name of the field which contains the metacell id</li>
<li>cell_type: name of the field which contains the cell type</li>
</ul>
<p>If this set of parameters and <code>cell_type_field</code> are missing, <strong>MCView</strong> would cluster the metacell matrix using kmeans++ algorithm (from the <code>tglkmeans</code> package).</p>
<div id="cell_type_annot-optional" class="section level4">
<h4 class="hasAnchor">
<a href="#cell_type_annot-optional" class="anchor"></a>cell_type_annot (optional)</h4>
<p>Link to a file that holds color assignment for each cell type (or cluster). If this is missing, <strong>MCView</strong> would use the <code>chameleon</code> package to assign cell type colors.</p>
<p>Parameters are:</p>
<ul>
<li>fn: filename with color assignment for each cell type (or cluster)</li>
<li>cell_type: name of the field which contains the cell type id</li>
<li>color: name of the field which contains the color</li>
</ul>
</div>
</div>
<div id="selected_gene1selected_gene2-optional" class="section level3">
<h3 class="hasAnchor">
<a href="#selected_gene1selected_gene2-optional" class="anchor"></a>selected_gene1/selected_gene2 (optional)</h3>
<p>The default genes that would be selected (in any screen with gene selection). If this parameter is missing, the 2 genes with highest max(expr)-min(expr) in the first dataset would be chosen.</p>
</div>
<div id="selected_mc1selected_mc2" class="section level3">
<h3 class="hasAnchor">
<a href="#selected_mc1selected_mc2" class="anchor"></a>selected_mc1/selected_mc2</h3>
<p>The default metacells that would be selected in the Metacells tab.</p>
</div>
</div>
<div id="help-yaml" class="section level2">
<h2 class="hasAnchor">
<a href="#help-yaml" class="anchor"></a>help.yaml</h2>
<p>This file contains the help messages used by introjs. It shouldn't be changed in general, except maybe the introduction message. Note that the messages refer to shiny elements, so you would have to look at the code itself in order to identify the element of each message.</p>
</div>
<div id="about-rmd" class="section level2">
<h2 class="hasAnchor">
<a href="#about-rmd" class="anchor"></a>about.Rmd</h2>
<p>This Rmarkdown file contains the contents of the about page. Edit it as you wish, and remember that you can remove the "About" tab altogether using the <code>tabs</code> parameter in <code>config.yaml</code>.</p>
</div>
<div id="metacell1-parameters" class="section level2">
<h2 class="hasAnchor">
<a href="#metacell1-parameters" class="anchor"></a>Metacell1 parameters</h2>
<p>The only section that changes when importing from metacell1 is in the dataset parameters. The following example imports a dataset that was generated using R metacell package:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">title:</span><span class="at"> MCView</span>
<span class="fu">tabs:</span><span class="at"> </span><span class="kw">[</span><span class="st">"About"</span><span class="kw">,</span> <span class="st">"Manifold"</span><span class="kw">,</span> <span class="st">"Genes"</span><span class="kw">,</span> <span class="st">"Metacells"</span><span class="kw">,</span> <span class="st">"Annotate"</span><span class="kw">]</span><span class="at"> </span><span class="co"># which tabs to show</span>
<span class="fu">help:</span><span class="at"> false </span><span class="co"># set to true to show introjs help on start</span>
<span class="fu">metacells:</span><span class="at"> </span>
  <span class="fu">PBMC:</span>
    <span class="fu">scdb:</span><span class="at"> scrna_db/ </span><span class="co"># path to R metacell scrna databse</span>
    <span class="fu">matrix:</span><span class="at"> exe_f </span><span class="co"># name of the umi matrix to use</span>
    <span class="fu">mc:</span><span class="at"> exe_f </span><span class="co"># name of the metacell object to use</span>
    <span class="fu">mc2d:</span><span class="at"> exe_f </span><span class="co"># name of the 2d projection object to use</span>
    <span class="fu">network:</span><span class="at"> exe_f </span><span class="co"># name of the network object to use (optional)</span>
    <span class="fu">mc_annot:</span><span class="at">  </span><span class="co"># cell type annotation for each metacell </span>
      <span class="fu">fn:</span><span class="at"> mc_annot.tsv </span><span class="co"># file with with cell type assignment for each metacell</span>
      <span class="fu">cell_type:</span><span class="at"> cell_type </span><span class="co"># name of the field which contains the cell type  </span>
      <span class="fu">cell_type_color:</span><span class="at"> cell_type_color </span><span class="co"># name of the field which contains the cell type color</span>
      <span class="fu">mc_age:</span><span class="at"> mc_age </span><span class="co"># age parameter for each metacell (optional)</span>
      <span class="fu">metacell:</span><span class="at"> metacell </span><span class="co"># name of the field which contains the metacell id</span>
    <span class="fu">cell_type_annot:</span><span class="at">   </span><span class="co"># color annotation for each cell type</span>
      <span class="fu">fn:</span><span class="at"> ell_type_annot.tsv </span><span class="co"># file with color for each cell type (optional)</span>
      <span class="fu">cell_type:</span><span class="at"> cell_type </span><span class="co"># name of the field which contains the cell type</span>
      <span class="fu">color:</span><span class="at"> color </span><span class="co"># name of the field which contains the color</span>
      <span class="fu">order:</span><span class="at"> order </span><span class="co"># name of the field which contains cell type order (optional). Needed mostly for vein plots</span>
    <span class="fu">time_annot:</span><span class="at"> </span><span class="co"># names for the time bins (optional, only relevant with networks/flows)</span>
      <span class="fu">fn:</span><span class="at"> time_annot.tsv </span><span class="co"># name of the file which contains a description (name) for each time bin</span>
      <span class="fu">time_bin:</span><span class="at"> time_bin </span><span class="co"># name of the field which contains the time bin</span>
      <span class="fu">time_desc:</span><span class="at"> time_desc </span><span class="co"># name of the field which contains the description of the time bin</span>
    <span class="fu">time_bin_field:</span><span class="at"> exe_f_age_group </span><span class="co"># name of a filed in cell_metadata which contains time bin per cell (optional)</span>
<span class="co"># selected_gene1: Foxc1 # Default selected gene1 (optional)</span>
<span class="co"># selected_gene2: Twist1 # Default selected gene2 (optional)</span>
<span class="fu">selected_mc1:</span><span class="at"> 1 </span><span class="co"># Default selected metacell1 </span>
<span class="fu">selected_mc2:</span><span class="at"> 2 </span><span class="co"># Default selected metacell2</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Aviezer Lifshitz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
